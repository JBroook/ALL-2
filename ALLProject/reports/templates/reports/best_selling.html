{% extends "users/navigation.html" %}
{% block dashboard %}

{% load static %}
    <link rel = "stylesheet" href="{% static 'css/best_selling.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mukta+Mahee:wght@200;300;400;500;600;700;800&family=Sansation:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">

    <head>
        <div id="dashboard">
            <h1>Product Sales (Monthly)</h1>
        </div>
    </head>
    <body>
        <div id="return" onclick="window.history.back()">
            <a href="{% url 'report' %}" id="close-box"><img src="{% static 'images/back-arrow.png' %}" alt="back-arrow" id="close"></a>
        </div>
        <div id="main-content">
            <table class="products">
                <thead class="products">
                    <tr>
                        <th class="products" style="width:10%;" 
                        onclick="window.location.href='?sort_by=rank&order={% if sort_by == 'rank' and order == 'asc' %}desc{% else %}asc{% endif %}{% if chosen %}&chosen={{ chosen }}{% endif %}';" style='cursor: pointer;'>
                            <div class='header-container'>
                                <p class="header-text"> Rank </p>
                                <img src="{% static "images/up-and-down-arrow.png" %}" alt="" class="filter">
                            </div>
                        </th>
                        <th class="products" style="width:15%;" onclick="window.location.href='?sort_by=category&order={% if sort_by == 'category' and order == 'asc' %}desc{% else %}asc{% endif %}{% if chosen %}&chosen={{ chosen }}{% endif %}';" style='cursor: pointer;'>
                            <div class='header-container'>
                                <p class="header-text"> Category </p>
                                <img src="{% static "images/up-and-down-arrow.png" %}" alt="" class="filter">
                            </div>
                        </th>
                        <th class="products" style="width:30%;" onclick="window.location.href='?sort_by=name&order={% if sort_by == 'name' and order == 'asc' %}desc{% else %}asc{% endif %}{% if chosen %}&chosen={{ chosen }}{% endif %}';" style='cursor: pointer;'>
                            <div class='header-container'>
                                <p class="header-text"> Product Name </p>
                                <img src="{% static "images/up-and-down-arrow.png" %}" alt="" class="filter">
                            </div>
                        </th>
                        <th class="products" style="width:20%;" onclick="window.location.href='?sort_by=supplier&order={% if sort_by == 'supplier' and order == 'asc' %}desc{% else %}asc{% endif %}{% if chosen %}&chosen={{ chosen }}{% endif %}';" style='cursor: pointer;'>
                            <div class='header-container'>
                                <p class="header-text"> Supplier </p>
                                <img src="{% static "images/up-and-down-arrow.png" %}" alt="" class="filter">
                            </div>
                        </th>
                        <th class="products" style="width:15%;" onclick="window.location.href='?sort_by=sale&order={% if sort_by == 'sale' and order == 'asc' %}desc{% else %}asc{% endif %}{% if chosen %}&chosen={{ chosen }}{% endif %}';" style='cursor: pointer;'>
                            <div class='header-container'>
                                <p class="header-text"> Total Sale </p>
                                <img src="{% static "images/up-and-down-arrow.png" %}" alt="" class="filter">
                            </div>
                        </th>
                        <th class="products" style="width:10%;" onclick="window.location.href='?sort_by=revenue&order={% if sort_by == 'revenue' and order == 'asc' %}desc{% else %}asc{% endif %}{% if chosen %}&chosen={{ chosen }}{% endif %}';" style='cursor: pointer;'>
                            <div class='header-container'>
                                <p class="header-text"> Revenue </p>
                                <img src="{% static "images/up-and-down-arrow.png" %}" alt="" class="filter">
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody class="products">
                    {% if product_rank %}
                        {% for product in product_rank %}
                            <tr class="products data" onclick="window.location.href='?chosen={{product.2}}';" style='cursor: pointer;'>
                                <td>{{ product.0 }}</td>
                                <td>{{ product.1 }}</td>
                                <td>{{ product.2 }}</td>
                                <td>{{ product.3 }}</td>
                                <td>{{ product.4 }}</td>
                                <td>RM {{ product.5 }}</td>
                            </tr>
                        {% endfor %}
                    {% endif %}
                    <tr></tr>
                </tbody>
            </table>
        </div>
    </body>
    {% block detail %}{% endblock detail %}
{% endblock dashboard %}